<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  
  {% if page.url contains '/teko/' %}
    <link rel="icon" type="image/png" href="{{ '/assets/icon_teko.png' | relative_url }}">
  {% elsif page.url contains '/aeftb/' %}
    <link rel="icon" type="image/png" href="{{ '/assets/icon_aeftb.ico' | relative_url }}">
  {% else %}
    <link rel="icon" type="image/png" href="{{ '/assets/icon_talio.png' | relative_url }}">
  {% endif %}

  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* 1. Fondo Global Oscuro (Ya definido en style.css, pero reforzamos estructura) */
    body { 
        margin: 0; 
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; 
    }
    
    /* 2. Contenedor Principal (Tarjeta) */
    .wiki-wrapper {
        display: flex;
        max-width: 1200px;
        margin: 0 auto;
        min-height: 100vh;
        background: #1e1e1e;
        box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }

    /* 3. Barra Lateral */
    .wiki-sidebar {
        width: 250px;
        background: #181818;
        border-right: 1px solid #333;
        padding: 30px 20px;
        flex-shrink: 0;
    }

    .wiki-sidebar h3 { 
        font-size: 1.1em; 
        color: #ffffff; 
        margin-top: 20px; 
        margin-bottom: 10px; 
        text-transform: uppercase; 
        letter-spacing: 1px;
    }
    
    .wiki-sidebar ul { list-style: none; padding: 0; margin: 0; }
    .wiki-sidebar li { margin-bottom: 8px; }
    
    .wiki-sidebar a { 
        color: #b0b0b0; 
        text-decoration: none; 
        display: block; 
        padding: 5px 0; 
        transition: color 0.2s; 
    }
    .wiki-sidebar a:hover { 
        color: #4db6ac; 
        padding-left: 5px; 
    }
    
    .wiki-sidebar .back-link { 
        font-size: 0.85em; 
        color: #666; 
        margin-bottom: 30px; 
        display: block; 
        border-bottom: 1px solid #333; 
        padding-bottom: 10px; 
    }

    /* 4. Contenido Principal */
    .wiki-content {
        flex-grow: 1;
        padding: 40px 60px;
    }

    .wiki-content h1, .wiki-content h2, .wiki-content h3 {
        color: #ffffff;
    }

    .wiki-content table {
        color: #e0e0e0;
        border-collapse: collapse;
        width: 100%;
    }
    .wiki-content th, .wiki-content td {
        border: 1px solid #444;
        padding: 8px;
    }
    .wiki-content th {
        background-color: #2d2d2d;
    }
    
    @media (max-width: 768px) {
        .wiki-wrapper { flex-direction: column; }
        .wiki-sidebar { width: auto; border-right: none; border-bottom: 1px solid #333; }
        .wiki-content { padding: 20px; }
    }

/* Estilos del Footer Específicos para Wiki (Oscuro) */
    .wiki-footer {
        border-top: 1px solid #333;
        padding: 20px 40px; /* Alineado con el padding del contenido */
        font-size: 0.85rem;
        color: #888;
        background: #1e1e1e;
        width: 100%;
        box-sizing: border-box;
    }
    
    .footer-inner {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 10px;
        max-width: 1200px; /* Coincide con wiki-wrapper */
        margin: 0 auto;
    }

    .wiki-footer a {
        color: #b0b0b0;
        text-decoration: none;
    }
    .wiki-footer a:hover {
        color: #4db6ac;
        text-decoration: underline;
    }

    @media (max-width: 768px) {
        .footer-inner {
            flex-direction: column;
            text-align: center;
        }
    }
    
  </style>
</head>
<body>

    <section class="page-header" style="margin-bottom: 0;">
      <h1 class="project-name">{{ page.title | default: site.title }}</h1>
      
      {% if page.header_buttons %}
        <div class="header-buttons-container">
          {% for btn in page.header_buttons %}
            
            {% assign btn_class = "btn custom-header-btn" %}
            
            {% if page.url == btn.url %}
              {% assign btn_class = btn_class | append: " active-btn" %}
            {% elsif btn.url != '/teko/' and page.url contains btn.url %}
               {% assign btn_class = btn_class | append: " active-btn" %}
            {% endif %}

            <a href="{{ btn.url }}" class="{{ btn_class }}" {% if btn.new_tab %}target="_blank" rel="noopener noreferrer"{% endif %}>
              
              {% if btn.image_path %}
                <img src="{{ btn.image_path }}" alt="icon" class="btn-img-icon">
              {% elsif btn.icon_class %}
                <i class="{{ btn.icon_class }}"></i>
              {% endif %}

              {% if btn.label %}
                <span class="btn-text">{{ btn.label }}</span>
              {% endif %}
            </a>
          {% endfor %}
        </div>
      {% endif %}
    </section>

    <div class="wiki-wrapper">
        <aside class="wiki-sidebar">
            <a href="/teko/" class="back-link">← Back to Teko Game</a>
            
            <h3>General</h3>
            <ul>
                <li><a href="/teko/wiki/">Home</a></li>
                <li><a href="/teko/wiki/rules/">Rules</a></li>
                <li><a href="/teko/wiki/glossary/">Glossary</a></li>
            </ul>

            <h3>Cards</h3>
            <ul>
                <li><a href="/teko/wiki/cards/common/">Common</a></li>
                <li><a href="/teko/wiki/cards/rare/">Rare</a></li>
                <li><a href="/teko/wiki/cards/epic/">Epic</a></li>
                <li><a href="/teko/wiki/cards/supreme/">Supreme</a></li>
                <li><a href="/teko/wiki/cards/forbidden/">Forbidden</a></li>
            </ul>
        </aside>

        <main class="wiki-content">
            <h1>{{ page.title }}</h1>
            <hr style="border: 0; border-top: 1px solid #333; margin: 20px 0;">
            {{ content }}
        </main>
    </div>

<footer class="wiki-footer">
    <div class="footer-inner">
        <div class="footer-left">
            &lt;&lt; Talio Games &gt;&gt; 
            <a href="/teko" target="_blank">TEKO</a> | 
            <a href="/aeftb" target="_blank">AEFTB</a> | 
            <a href="https://store.steampowered.com/developer/TalioGames" target="_blank">Steam</a> | 
            <a href="https://discord.com/invite/Xk8RxfWBn6" target="_blank">Discord</a> | 
            <a href="https://www.youtube.com/@TalioGames" target="_blank">Youtube</a> | 
            <a href="https://x.com/TalioGames" target="_blank">X</a> | 
            <a href="https://patreon.com/c/TalioGames" target="_blank">Donate</a>
        </div>
        <div class="footer-right">
            Contact: <a href="mailto:contact@taliogames.com">contact@taliogames.com</a>
        </div>
    </div>
</footer>
  
</body>
</html>
