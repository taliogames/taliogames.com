<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  
  {% if page.url contains '/teko/' %}
    <link rel="icon" type="image/png" href="{{ '/assets/icon_teko.png' | relative_url }}">
  {% elsif page.url contains '/aeftb/' %}
    <link rel="icon" type="image/png" href="{{ '/assets/icon_aeftb.ico' | relative_url }}">
  {% else %}
    <link rel="icon" type="image/png" href="{{ '/assets/icon_talio.png' | relative_url }}">
  {% endif %}

  <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
  
  <style>
    /* 1. Fondo Global Oscuro */
    body { 
        background-color: #121212; /* Mismo fondo que tu sitio principal */
        margin: 0; 
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; 
        color: #e0e0e0; /* Texto claro */
    }
    
    /* 2. Contenedor Principal (Tarjeta) */
    .wiki-wrapper {
        display: flex;
        max-width: 1200px;
        margin: 0 auto;
        min-height: 100vh;
        background: #1e1e1e; /* Gris oscuro para el contenedor */
        box-shadow: 0 0 20px rgba(0,0,0,0.5); /* Sombra más oscura */
    }

    /* 3. Barra Lateral */
    .wiki-sidebar {
        width: 250px;
        background: #181818; /* Un poco más oscuro que el contenido */
        border-right: 1px solid #333; /* Borde oscuro sutil */
        padding: 30px 20px;
        flex-shrink: 0;
    }

    /* Títulos de la barra lateral */
    .wiki-sidebar h3 { 
        font-size: 1.1em; 
        color: #ffffff; /* Títulos en blanco */
        margin-top: 20px; 
        margin-bottom: 10px; 
        text-transform: uppercase; 
        letter-spacing: 1px;
    }
    
    .wiki-sidebar ul { list-style: none; padding: 0; margin: 0; }
    .wiki-sidebar li { margin-bottom: 8px; }
    
    /* Enlaces de la barra lateral */
    .wiki-sidebar a { 
        color: #b0b0b0; /* Gris claro para enlaces normales */
        text-decoration: none; 
        display: block; 
        padding: 5px 0; 
        transition: color 0.2s; 
    }
    .wiki-sidebar a:hover { 
        color: #4db6ac; /* Color Cyan/Turquesa al pasar el mouse (como tu style.scss) */
        padding-left: 5px; 
    }
    
    /* Enlace de "Volver" */
    .wiki-sidebar .back-link { 
        font-size: 0.85em; 
        color: #666; 
        margin-bottom: 30px; 
        display: block; 
        border-bottom: 1px solid #333; 
        padding-bottom: 10px; 
    }

    /* 4. Contenido Principal */
    .wiki-content {
        flex-grow: 1;
        padding: 40px 60px;
    }

    /* Asegurar que los encabezados dentro del contenido sean blancos */
    .wiki-content h1, .wiki-content h2, .wiki-content h3 {
        color: #ffffff;
    }

    /* Estilos para Tablas (por si usas tablas para las cartas) */
    .wiki-content table {
        color: #e0e0e0;
        border-collapse: collapse;
        width: 100%;
    }
    .wiki-content th, .wiki-content td {
        border: 1px solid #444;
        padding: 8px;
    }
    .wiki-content th {
        background-color: #2d2d2d;
    }
    
    /* Responsive para móviles */
    @media (max-width: 768px) {
        .wiki-wrapper { flex-direction: column; }
        .wiki-sidebar { width: auto; border-right: none; border-bottom: 1px solid #333; }
        .wiki-content { padding: 20px; }
    }
  </style>
</head>
<body>

    <section class="page-header" style="margin-bottom: 0;">
      <h1 class="project-name">{{ page.title | default: site.title }}</h1>
      
      {% if page.header_buttons %}
        <div class="header-buttons-container">
          {% for btn in page.header_buttons %}
            
            {% assign btn_class = "btn custom-header-btn" %}
            
            {% if page.url == btn.url %}
              {% assign btn_class = btn_class | append: " active-btn" %}
            {% elsif btn.url != '/teko/' and page.url contains btn.url %}
               {% assign btn_class = btn_class | append: " active-btn" %}
            {% endif %}

            <a href="{{ btn.url }}" class="{{ btn_class }}" {% if btn.new_tab %}target="_blank" rel="noopener noreferrer"{% endif %}>
              {% if btn.icon_class %}
                <i class="{{ btn.icon_class }}"></i>
              {% endif %}
              {% if btn.label %}
                <span class="btn-text">{{ btn.label }}</span>
              {% endif %}
            </a>
          {% endfor %}
        </div>
      {% endif %}
    </section>

    <div class="wiki-wrapper">
        <aside class="wiki-sidebar">
            <a href="/teko/" class="back-link">← Back to Teko Game</a>
            
            <h3>General</h3>
            <ul>
                <li><a href="/teko/wiki/">Home</a></li>
                <li><a href="/teko/wiki/rules/">Rules</a></li>
                <li><a href="/teko/wiki/glossary/">Glossary</a></li>
            </ul>

            <h3>Cards</h3>
            <ul>
                <li><a href="/teko/wiki/cards/common/">Common</a></li>
                <li><a href="/teko/wiki/cards/rare/">Rare</a></li>
                <li><a href="/teko/wiki/cards/epic/">Epic</a></li>
                <li><a href="/teko/wiki/cards/supreme/">Supreme</a></li>
                <li><a href="/teko/wiki/cards/forbidden/">Forbidden</a></li>
            </ul>
        </aside>

        <main class="wiki-content">
            <h1>{{ page.title }}</h1>
            <hr style="border: 0; border-top: 1px solid #333; margin: 20px 0;">
            {{ content }}
        </main>
    </div>

</body>
</html>
